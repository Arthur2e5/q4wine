<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Wine AppDB xmlexport: DB Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DB Class Reference</h1><!-- doxytag: class="DB" -->
<p>General Database calss.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDB.html#a095c5d389db211932136b53f25f39685">__construct</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Database class constructor.  <a href="#a095c5d389db211932136b53f25f39685"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDB.html#a4d611d45bf4ee014714f9df3cf3921d2">exportAppByName</a> ($search, $page=1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function for creating Application search view by app name.  <a href="#a4d611d45bf4ee014714f9df3cf3921d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDB.html#a369133e131cdcfcb202349fd842e9688">exportAppById</a> ($appid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function for creating application XML view.  <a href="#a369133e131cdcfcb202349fd842e9688"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDB.html#ab57c71abb05b376853311bb838a9c0f6">exportTestResults</a> ($appid, $verid=0, $testid=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function for creating application test result XML view.  <a href="#ab57c71abb05b376853311bb838a9c0f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDB.html#a524d96740234a07de1fe4889e2af962d">exportCategory</a> ($catid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function for creating category list XML view.  <a href="#a524d96740234a07de1fe4889e2af962d"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>General Database calss. </p>
<p>This class provides general database functions it will extract data from wine appdb and bugzilla bases and request xml class function to create xml view</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Malakhov Alexey </dd></dl>

<p>Definition at line <a class="el" href="db_8php_source.html#l00038">38</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a095c5d389db211932136b53f25f39685"></a><!-- doxytag: member="DB::__construct" ref="a095c5d389db211932136b53f25f39685" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Database class constructor. </p>
<p>Database constructor will connects to databases and creates database links.</p>
<p>Also we will call XML class constructor </p>

<p><p>Geting global config values from ./cfg/config.inc</p>
<p>Connecting to appdb database</p>
<p>First, when connecting, the funct would first try to find a (persistent) link that's already open with the same host, username and password. If one is found, an identifier for it will be returned instead of opening a new connection.</p>
<p>Connect to wine bugzilla database</p>
<p>Init for XML class link and call for <a class="el" href="classXMLExport.html" title="General XML export calss.">XMLExport</a> constructor </p>
</p>

<p>Definition at line <a class="el" href="db_8php_source.html#l00056">56</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a369133e131cdcfcb202349fd842e9688"></a><!-- doxytag: member="DB::exportAppById" ref="a369133e131cdcfcb202349fd842e9688" args="($appid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">exportAppById </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>appid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for creating application XML view. </p>
<p>This function will create application XML view by app ID</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>appid</em>&nbsp;</td><td>application ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>xml_view string containg full XML view </dd></dl>

<p><p>Convert app id into int type</p>
<p>Creates XML header</p>
<p>Get app database info by appid </p>
<dl class="see"><dt><b>See also:</b></dt><dd>getApp()</dd></dl>
<p>Close XML view header </p>
</p>

<p>Definition at line <a class="el" href="db_8php_source.html#l00174">174</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4d611d45bf4ee014714f9df3cf3921d2"></a><!-- doxytag: member="DB::exportAppByName" ref="a4d611d45bf4ee014714f9df3cf3921d2" args="($search, $page=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">exportAppByName </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>search</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>page</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for creating Application search view by app name. </p>
<p>This function will search for application name and return XML view for 10 search matches.</p>
<p>Also it returns pages count</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>search</em>&nbsp;</td><td>Search criteria (usually it is application name) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>page</em>&nbsp;</td><td>Start page, default is 1 (first)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>xml_view string containg full XML view </dd></dl>

<p><p>Get only first 20 characters this will makes sql injection more harder ;)</p>
<p>Convert page variable into int type</p>
<p>query for search muches count to get page count</p>
<p>Creates xml header and add pages info</p>
<p>Free the resources associated with the result set</p>
<p>query for first 10 application records with specifyed start page</p>
<p>Getting aplication version </p>
<dl class="see"><dt><b>See also:</b></dt><dd>getVersion()</dd></dl>
<p>Creating AppInfo XML view</p>
<p>If no application found -- creates error header</p>
<p>Close XML view header</p>
<p>Free the resources associated with the result set </p>
</p>

<p>Definition at line <a class="el" href="db_8php_source.html#l00102">102</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>

</div>
</div>
<a class="anchor" id="a524d96740234a07de1fe4889e2af962d"></a><!-- doxytag: member="DB::exportCategory" ref="a524d96740234a07de1fe4889e2af962d" args="($catid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">exportCategory </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>catid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for creating category list XML view. </p>
<p>This function will create application category XML view by catid</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>catid</em>&nbsp;</td><td>category ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>xml_view string containg full XML view </dd></dl>

<p><p>Convert into int type</p>
<p>Creates XML header</p>
<p>Getting category info </p>
<dl class="see"><dt><b>See also:</b></dt><dd>getCategory()</dd></dl>
<p>query subcategory list by parent ID</p>
<p>get category view</p>
<p>Free the resources associated with the result set</p>
<p>query application data by category ID</p>
<p>get appinfo view</p>
<p>Close XML view header</p>
<p>Free the resources associated with the result set </p>
</p>

<p>Definition at line <a class="el" href="db_8php_source.html#l00236">236</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab57c71abb05b376853311bb838a9c0f6"></a><!-- doxytag: member="DB::exportTestResults" ref="ab57c71abb05b376853311bb838a9c0f6" args="($appid, $verid=0, $testid=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">exportTestResults </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>appid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>verid</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>testid</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for creating application test result XML view. </p>
<p>This function will create application test result view by appid, verid or testid</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>appid</em>&nbsp;</td><td>application ID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>verid</em>&nbsp;</td><td>application version ID, default 0 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>testid</em>&nbsp;</td><td>application test ID, default 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>xml_view string containg full XML view </dd></dl>

<p><p>Convert into int type</p>
<p>Convert into int type</p>
<p>Convert into int type</p>
<p>Creates XML header</p>
<p>Get app database info by appid </p>
<dl class="see"><dt><b>See also:</b></dt><dd>getApp()</dd></dl>
<p>Close XML view header </p>
</p>

<p>Definition at line <a class="el" href="db_8php_source.html#l00201">201</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>engine/<a class="el" href="db_8php_source.html">db.php</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Jan 12 15:28:46 2010 for Wine AppDB xmlexport by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
